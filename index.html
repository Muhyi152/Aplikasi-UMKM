<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kasir UMKM PRO</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="app">

<!-- ================= SIDEBAR ================= -->
<aside class="sidebar">
  <div class="sidebar-header">
    <h2>üè™ Kasir</h2>
    <button class="menu-toggle" onclick="toggleMenu()">‚ò∞</button>
  </div>

  <ul id="menuList">
    <li onclick="showPage('produk');closeMenu()">Produk</li>
    <li onclick="showPage('transaksi');closeMenu()">Transaksi</li>
    <li onclick="showPage('riwayat');closeMenu()">Riwayat</li>
  </ul>
</aside>

<!-- ================= CONTENT ================= -->
<main class="content">

<!-- ================= PRODUK ================= -->
<section id="produk" class="page active">
  <h3>üì¶ Manajemen Produk</h3>

  <div class="form">
    <input id="namaProduk" placeholder="Nama Produk">
    <input id="hargaProduk" type="number" placeholder="Harga">

    <!-- üî• FOTO DARI FLUTTER -->
    <input type="hidden" id="fotoProduk">

    <button type="button" onclick="ambilFoto()">üì∑ Pilih Foto Produk</button>

    <img id="previewFoto"
         style="display:none;margin-top:10px;width:120px;border-radius:8px">

    <button type="button" id="btnSimpan" onclick="simpanProduk()">
      Tambah Produk
    </button>
  </div>

  <div id="produkList" class="produk-grid"></div>
</section>

<!-- ================= TRANSAKSI ================= -->
<section id="transaksi" class="page">
  <h3>üßæ Transaksi</h3>
  <div id="produkTransaksi" class="produk-grid"></div>
</section>

<!-- ================= RIWAYAT ================= -->
<section id="riwayat" class="page">
  <h3>üìú Riwayat Transaksi</h3>
  <table>
    <tbody id="riwayatList"></tbody>
  </table>
</section>

</main>
</div>

<script src="script.js"></script>

<script>
function toggleMenu(){
  document.getElementById("menuList").classList.toggle("show");
}
function closeMenu(){
  document.getElementById("menuList").classList.remove("show");
}

/* ================= FLUTTER BRIDGE ================= */

// DIPANGGIL OLEH TOMBOL
function ambilFoto() {
  if (window.ImageChannel) {
    window.ImageChannel.postMessage("pick");
  } else {
    alert("Image picker belum siap");
  }
}

// DIPANGGIL DARI FLUTTER
function setFoto(base64) {
  const input = document.getElementById("fotoProduk");
  const preview = document.getElementById("previewFoto");

  input.value = base64;
  preview.src = base64;
  preview.style.display = "block";
}
</script>

</body>
</html>
